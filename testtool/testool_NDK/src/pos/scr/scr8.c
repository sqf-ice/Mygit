/************************************************************************
*
* copyright(c)2005-2008 Newland Co. Ltd. All rights reserved
* module			: 显示
* file name		: 8.c
* Author 			: zhuq
* version			: 
* DATE			: 20121224
* directory 		: 
* description		: 测试NDK_ScrDrawBitmap能否在屏幕上显示图片
* 
************************************************************************/

/*-----------------------includes-------------------------------*/
#include "mode.h"

/*---------------constants/macro definition---------------------*/
#define  MAXWAITTIME 10//30
#define 	TESTAPI		"NDK_ScrDrawBitmap"
#if defined ME32 || defined ME32GX|| defined ME32THM
#define  HEIGHT_HLJNX 26
#else
#define  HEIGHT_HLJNX 51
#endif


/*------------global variables definition-----------------------*/

/*----------global variables declaration("extern")--------------*/

/*---------------structure definition---------------------------*/

/*---------------functions declaration--------------------------*/

/*---------------functions definition---------------------------*/
/****************************************************************
* function name 	 	: scr8
* functional description 	: 
* input parameter	 	:
* output parameter	 	: 
* return value		 	:
* history 		 		: author			date			remarks
*			  	  	        zhuq         20121224  	   created
*
*****************************************************************/
void scr8(void)
{
	/*private & local definition*/
	int nKeyin = ENTER, ret = 0, y = 0;		
	//新大陆文字(80*26) ME32的屏幕大小是96*48,原来的点阵图片不能使用故修改 linying 20171207
#if defined ME32 || defined ME32GX
	    const unsigned char gImage_test[260] = { /* 0X00,0X01,0X50,0X00,0X1A,0X00, */
	0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
	0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0XC0,
	0X07,0X00,0X01,0XC0,0X00,0XFF,0X03,0X00,0X1F,0XFE,0XFE,0X00,0X01,0XC0,0X00,0XE7,
	0X03,0X80,0X1F,0XFE,0XFC,0X00,0X01,0XC0,0X00,0XE7,0X7F,0XF8,0X06,0X18,0XC0,0X00,
	0X01,0XC0,0X00,0XE6,0X27,0X90,0X06,0X18,0XC0,0X00,0X01,0XC0,0X00,0XEE,0X03,0X00,
	0X03,0X30,0XC0,0X07,0XFF,0XFF,0XE0,0XEC,0X03,0X00,0X1F,0XFE,0XFF,0X03,0XFF,0XFF,
	0XE0,0XEC,0X03,0X00,0X1F,0XFE,0XFF,0X00,0X01,0XC0,0X00,0XEC,0X7F,0XFC,0X00,0X00,
	0XE6,0X00,0X01,0XC0,0X00,0XEC,0X7F,0XF8,0X00,0XE0,0XC6,0X00,0X01,0XC0,0X00,0XEC,
	0X03,0X00,0X1F,0XFE,0XC6,0X00,0X03,0XC0,0X00,0XEE,0X03,0X00,0X09,0XFE,0XC6,0X00,
	0X03,0XC0,0X00,0XE6,0X03,0X00,0X00,0XC0,0XC6,0X00,0X03,0XC0,0X00,0XE6,0X73,0X38,
	0X0F,0XE0,0XC6,0X00,0X03,0XE0,0X00,0XE7,0X63,0X18,0X0E,0XF0,0XC6,0X00,0X07,0XE0,
	0X00,0XE7,0X63,0X18,0X0E,0XF8,0XC6,0X00,0X0F,0XF0,0X00,0XE7,0X63,0X18,0X0E,0XCC,
	0XC6,0X00,0X1E,0X78,0X00,0XEF,0X63,0X18,0X0E,0XCC,0XC6,0X00,0X3E,0X3C,0X00,0XFF,
	0X63,0X18,0X0C,0XC4,0XC6,0X00,0X7C,0X1F,0X00,0XE0,0X63,0X18,0X0C,0XC1,0X86,0X01,
	0XF8,0X0F,0X80,0XE0,0X73,0X18,0X18,0XC1,0X06,0X03,0XC0,0X03,0XE0,0XE0,0X7F,0XF8,
	0X10,0XC0,0X06,0X06,0X00,0X00,0X60,0XE0,0X3F,0XF8,0X00,0X00,0X00,0X00,0X00,0X00,
	0X00,0X00,0X00,0X00,};


#else
	// 黑龙江农信广告图(128*51)
	char sCUPBMP51x48[] =
	{
	0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
	0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X20,0X04,0X00,0X00,0X00,0X00,
	0X60,0X06,0X00,0X00,0X00,0X00,0XC7,0XE3,0X00,0X00,0X00,0X03,0X8F,0XF3,0X80,0X00,
	0X00,0X07,0X1F,0XF9,0XC0,0X00,0X00,0X0E,0X1F,0XF8,0XE0,0X00,0X00,0X1E,0X1E,0X00,
	0X70,0X00,0X00,0X3C,0X3C,0X00,0X78,0X00,0X00,0X38,0X3C,0X38,0X3C,0X00,0X00,0X78,
	0X3E,0X78,0X3E,0X00,0X00,0XF8,0X1F,0XF8,0X3E,0X00,0X00,0XF8,0X1F,0XF8,0X3F,0X00,
	0X01,0XFC,0X0F,0XF0,0X7F,0X80,0X03,0XFE,0X07,0XC0,0XFF,0X80,0X07,0XFF,0X00,0X01,
	0XFF,0XC0,0X07,0XFF,0X80,0X03,0XFF,0XE0,0X07,0XFF,0XC0,0X07,0XFF,0XE0,0X07,0XFF,
	0XE0,0X0F,0XFF,0XC0,0X03,0XFF,0XF0,0X1F,0XFF,0X80,0X01,0XFF,0XF8,0X3F,0XFF,0X00,
	0X00,0XFF,0XFC,0X7F,0XFE,0X00,0X00,0X7F,0XFE,0XFF,0XFC,0X00,0X00,0X3F,0XFE,0XFF,
	0XF8,0X00,0X00,0X1F,0XFC,0X7F,0XF0,0X00,0X00,0X0F,0XFC,0X7F,0XF0,0X00,0X00,0X0F,
	0XF8,0X3F,0XF0,0X00,0X00,0X0F,0XF8,0X1F,0XF0,0X00,0X00,0X0F,0XF8,0X1F,0XF0,0X00,
	0X00,0X1F,0XF0,0X0F,0XF8,0X00,0X00,0X3F,0XE0,0X07,0XFC,0X00,0X00,0XFF,0XC0,0X07,
	0XFE,0X00,0X00,0XFF,0X80,0X03,0XFF,0X00,0X00,0XFF,0X00,0X01,0XFF,0X00,0X00,0X00,
	0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X04,0X07,0XFE,0X21,0X00,0X40,
	0X04,0X04,0X02,0X3F,0XE0,0XA0,0X7F,0XC5,0XFA,0X20,0X01,0X10,0X44,0X44,0X42,0X4F,
	0XC2,0X08,0X44,0X45,0XFA,0X40,0X0D,0XF6,0X44,0X44,0X42,0XCF,0XC0,0X00,0X7F,0XC4,
	0X52,0X40,0X00,0X00,0X04,0X04,0X4A,0X4F,0XC3,0XF8,0X04,0X07,0XFE,0X48,0X42,0X08,
	0X04,0X04,0X02,0X4F,0XC2,0X08,0X04,0X07,0XFE,0X48,0X43,0XF8,0X00,0X00,0X00,0X00,
	0X00,0X00, 
	};
	char sHLJNXBMP51x80[] =
	{
	0X00,0X1F,0XF0,0X24,0X20,0X00,0X10,0X08,0X40,0X00,0X00,0X11,0X10,0X22,0X17,0XF0,
	0X10,0X0F,0XF8,0X00,0X00,0X15,0X53,0XFF,0X80,0X81,0XFF,0X08,0X00,0X00,0X00,0X13,
	0X90,0X28,0X28,0X83,0X11,0X13,0XF0,0X00,0X00,0X1F,0XF0,0X29,0X18,0X80,0X29,0X10,
	0X00,0X00,0X00,0X01,0X00,0X2A,0X08,0X80,0X4A,0X33,0XF0,0X00,0X00,0X1F,0XF0,0X4C,
	0X10,0X80,0XC4,0X10,0X00,0X00,0X00,0X01,0X00,0X48,0X10,0X81,0X44,0X13,0XF0,0X00,
	0X00,0X3F,0XF8,0X98,0XB0,0X82,0X42,0X12,0X10,0X00,0X00,0X14,0X91,0X68,0X90,0X80,
	0X59,0X93,0XF0,0X00,0X00,0X22,0X4A,0X0F,0X9F,0XF8,0X60,0X12,0X10,0X00,0X00,0X00,
	0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X02,0X10,0X01,0X10,0X00,0X04,0X10,0X00,
	0X20,0X40,0X02,0X3C,0X00,0XAE,0XC0,0X02,0X10,0X00,0X22,0X40,0X1F,0XA4,0X01,0XF2,
	0X40,0X00,0XFE,0X00,0X22,0X40,0X14,0XB4,0X00,0X42,0X40,0X1E,0X92,0X00,0X22,0X40,
	0X0F,0XAC,0X00,0XEA,0XC0,0X02,0XFE,0X00,0XB3,0X40,0X0A,0X20,0X00,0X46,0X40,0X04,
	0X92,0X00,0XAA,0XC0,0X1F,0XBE,0X00,0X42,0X40,0X0E,0X92,0X01,0X22,0X40,0X0A,0X02,
	0X01,0XF6,0XC0,0X14,0XFE,0X00,0X22,0X40,0X0F,0XBA,0X00,0X4B,0X40,0X04,0X92,0X00,
	0X22,0X40,0X0A,0X02,0X00,0X42,0X40,0X04,0X10,0X00,0X42,0X40,0X0F,0X92,0X00,0X82,
	0X40,0X04,0X10,0X00,0X82,0X40,0X08,0X0C,0X01,0X06,0XC0,0X04,0X10,0X01,0X00,0X40,
	0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X80,0X00,0X9F,0XC0,0X00,
	0X00,0X00,0X00,0X00,0X00,0X80,0X00,0X45,0X00,0X0F,0XFC,0X01,0XFF,0XE0,0X00,0XFC,
	0X00,0X42,0X00,0X00,0X80,0X00,0X08,0X00,0X00,0X80,0X00,0X1F,0XC0,0X00,0X80,0X00,
	0X08,0X00,0X00,0X80,0X01,0XD2,0X40,0X1F,0XFE,0X00,0X0E,0X00,0X1F,0XFE,0X00,0X5F,
	0XC0,0X00,0X80,0X00,0X09,0X80,0X00,0X80,0X00,0X52,0X40,0X00,0X80,0X00,0X08,0X80,
	0X00,0XE0,0X00,0X5F,0XC0,0X01,0X40,0X00,0X08,0X00,0X00,0X98,0X00,0X52,0X40,0X01,
	0X20,0X00,0X08,0X00,0X00,0X84,0X00,0X52,0XC0,0X02,0X10,0X00,0X08,0X00,0X00,0X80,
	0X00,0XA0,0X00,0X04,0X08,0X00,0X08,0X00,0X00,0X80,0X01,0X1F,0XE0,0X18,0X06,0X00,
	0X08,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
	0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X82,0X00,0X0F,0XC4,0X00,0X08,0X00,
	0X00,0X00,0X00,0X5F,0XE0,0X08,0X44,0X00,0X08,0X00,0X00,0X00,0X00,0X02,0X00,0X08,
	0X54,0X00,0X0F,0XC0,0X00,0X00,0X00,0X0F,0XC0,0X0F,0XD4,0X00,0X08,0X00,0X00,0X00,
	0X01,0XC2,0X00,0X09,0X14,0X00,0X08,0X00,0X00,0X00,0X00,0X5F,0XE0,0X0F,0XD4,0X01,
	0XFF,0XE0,0X00,0X00,0X00,0X48,0X40,0X0D,0X54,0X00,0X08,0X00,0X00,0X00,0X00,0X4F,
	0XC0,0X0D,0X54,0X00,0X0E,0X00,0X00,0X00,0X00,0X48,0X40,0X15,0X54,0X00,0X09,0X80,
	0X00,0X00,0X00,0X6F,0XC0,0X15,0X44,0X00,0X08,0X40,0X00,0X00,0X00,0X48,0X40,0X05,
	0XC4,0X00,0X08,0X00,0X00,0X00,0X00,0X08,0XC0,0X01,0X0C,0X00,0X08,0X00, 
	};
#endif
	uint getx = 0, gety = 0, ViewWidth = 0, ViewHeight = 0;
	
	/*process body*/
	cls_printf("测试%s...", TESTAPI);//屏幕提示当前测试所在模块与用例

	//状态栏打开情况下需要获取屏幕实际视口大小作为看边界测试值,状态栏未打开情况下就是液晶的宽和高
	NDK_ScrGetViewPort(&getx, &gety, &ViewWidth, &ViewHeight);
	
	//case1:图片为NULL
	if((ret=NDK_ScrDrawBitmap(0,0,GUI_GetLCDWidth(),GUI_GetLCDHeight(),NULL))!=NDK_ERR_PARA)
	{
		send_result("line %d:%s测试失败(%d)", __LINE__, TESTAPI, ret);
		RETURN;
	}
	NDK_ScrRefresh();
	
	//case2:参数异常：unX,unY,unWidth,unHeight分别为-1,>屏幕,unX+unWidth>屏幕,unY+unHeight>屏幕
	if((ret=NDK_ScrDrawBitmap(-1,0,GUI_GetLCDWidth(),GUI_GetLCDHeight(),NL_BMP))!=NDK_ERR_PARA)
	{
		send_result("line %d:%s测试失败(%d)", __LINE__, TESTAPI, ret);
		RETURN;
	}	
	if((ret=NDK_ScrDrawBitmap(0,-1,GUI_GetLCDWidth(),GUI_GetLCDHeight(),NL_BMP))!=NDK_ERR_PARA)
	{
		send_result("line %d:%s测试失败(%d)", __LINE__, TESTAPI, ret);
		RETURN;
	}	
	if((ret=NDK_ScrDrawBitmap(0,0,-1,GUI_GetLCDHeight(),NL_BMP))!=NDK_ERR_PARA)
	{
		send_result("line %d:%s测试失败(%d)", __LINE__, TESTAPI, ret);
		RETURN;
	}	
	if((ret=NDK_ScrDrawBitmap(0,0,GUI_GetLCDWidth(),-1,NL_BMP))!=NDK_ERR_PARA)
	{
		send_result("line %d:%s测试失败(%d)", __LINE__, TESTAPI, ret);
		RETURN;
	}	
	if((ret=NDK_ScrDrawBitmap(0,0,GUI_GetLCDWidth()+1,GUI_GetLCDHeight(),NL_BMP))!=NDK_ERR_PARA)
	{
		send_result("line %d:%s测试失败(%d)", __LINE__, TESTAPI, ret);
		RETURN;
	}
	if((ret=NDK_ScrDrawBitmap(0,0,GUI_GetLCDWidth(),GUI_GetLCDHeight()+1,NL_BMP))!=NDK_ERR_PARA)
	{
		send_result("line %d:%s测试失败(%d)", __LINE__, TESTAPI, ret);
		RETURN;
	}
	if((ret=NDK_ScrDrawBitmap(10,0,GUI_GetLCDWidth()-9,GUI_GetLCDHeight(),NL_BMP))!=NDK_ERR_PARA)
	{
		send_result("line %d:%s测试失败(%d)", __LINE__, TESTAPI, ret);
		RETURN;
	}
	if((ret=NDK_ScrDrawBitmap(0,10,GUI_GetLCDWidth(),GUI_GetLCDHeight()-9,NL_BMP))!=NDK_ERR_PARA)
	{
		send_result("line %d:%s测试失败(%d)", __LINE__, TESTAPI, ret);
		RETURN;
	}
	NDK_ScrRefresh();
	NDK_SysDelay(30);
	NDK_ScrClrs();

	//case3:测试NDK_ScrDrawBitmap屏幕显示图片
	for(y=0; y<=ViewHeight-HEIGHT_HLJNX;y+=7)
	{
#if defined ME32 || defined ME32GX|| defined ME32THM
    if((ret=NDK_ScrDrawBitmap(0,y,80,HEIGHT_HLJNX,gImage_test))!=NDK_OK)
		{
			send_result("line %d:%s测试失败(%d)", __LINE__, TESTAPI, ret);
			RETURN;
		}
#else
		if((ret=NDK_ScrDrawBitmap(0,y,48,HEIGHT_HLJNX,sCUPBMP51x48))!=NDK_OK)
		{
			send_result("line %d:%s测试失败(%d)", __LINE__, TESTAPI, ret);
			RETURN;
		}
		if((ret=NDK_ScrDrawBitmap(48,y,80,HEIGHT_HLJNX,sHLJNXBMP51x80))!=NDK_OK)
		{
			send_result("line %d:%s测试失败(%d)", __LINE__, TESTAPI, ret);
			RETURN;
		}
#endif	
		NDK_ScrRefresh();	
		NDK_SysDelay(10);
		NDK_ScrClrs();
	}
	nKeyin = cls_show_msg1(MAXWAITTIME, "按确认测试通过,其它键失败");
	if (nKeyin==ENTER || nKeyin==0)
		send_result("%s测试通过", TESTAPI);
	else
		send_result("%s测试失败", TESTAPI);
	return;
}

